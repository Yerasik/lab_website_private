---
layout: default 
---

{% include nav.html %}
<!-- first container -->
<div class="container-publications">
  <did class="tag-header">
    <div class="header-and-search">
      <h1 class="header">Publications</h1>

      <div class="search-wrapper">
        <i class="search-icon fas fa-search"></i>
        <input type="search-input" id="search" placeholder="Filter">
      </div>
    </div>
    {% assign all_tags = "" | split: "" %}
    {% for pub in site.data.publications %}
      {% assign all_tags = all_tags | concat: pub.tags %}
    {% endfor %}
    {% assign unique_tags = all_tags | uniq | sort %}

    <p>All tags:</p>
    <div class="tag-holder">
      {% for tag in unique_tags %}
        <div class="tag"><p>{{ tag }}</p></div>
      {% endfor %}
</div>
   
  </did>
  
  <hr>
  <div class="publications-content-wrapper" >
    {% assign publications_with_numbers = "" | split: "" %}
{% for pub in site.data.publications %}
  {% assign pub_number = pub.number | plus: 0 %}
  {% assign new_pub = pub | merge: { "number": pub_number } %}
  {% assign publications_with_numbers = publications_with_numbers | push: new_pub %}
{% endfor %}

{% assign sorted_publications = publications_with_numbers | sort: "number" | reverse %}

    {% for publication in sorted_publications %}
      <div class="publication" data-tags="{{ publication.tags | join: ',' }}">
        <div class="publication-wrapper" id="{{ publication.reference | remove: '#' }}" data-href="../{{publication.origin}}">
          <div class="text-wrapper">
            <div class="number-and-url">
            <h1>{{publication.number}}</h1>
            <a href="{{publication.link}}">URL</a>
            {% if publication.tags %}
            <div class="tag-wrapper">
              {% for tag in publication.tags %}
                <div class="tag"><p>{{ tag }}</p></div>
              {% endfor %}
            </div>
            {% endif %}
            
            </div>
            <div class="information">
              
              <h1>{{publication.title}}</h1>
              <p>{{publication.authors}}</p>
              <p class="journal">{{publication.journal}}</p>
            </div>
          </div>
          <div class="image-box">
            <img src="{{publication.image}}" />
          </div>

          
        </div>
        <hr style="margin: 1rem 0;">
      </div>
    {% endfor %}
  </div>    
</div>
 
{% include footer.html %}

<!-- for tag colors -->
<script>
  // Generate a consistent HSL color from a string
  function stringToColor(str) {
    let hash = 0;
    for (let i = 0; i < str.length; i++) {
      hash = str.charCodeAt(i) + ((hash << 5) - hash);
    }
    return `hsl(${hash % 360}, 70%, 70%)`;
  }

  document.addEventListener("DOMContentLoaded", function () {
    // Collect all tag elements across the page
    const allTagElements = document.querySelectorAll(".tag-holder .tag, .tag-wrapper .tag");

    // Map to store tag name â†’ color
    const tagColorMap = {};

    // First pass: assign colors and store them
    allTagElements.forEach(tagEl => {
      const tagText = tagEl.textContent.trim();
      if (!tagColorMap[tagText]) {
        tagColorMap[tagText] = stringToColor(tagText);
      }
    });

    // Second pass: apply colors consistently
    allTagElements.forEach(tagEl => {
      const tagText = tagEl.textContent.trim();
      const color = tagColorMap[tagText];
      tagEl.style.backgroundColor = color;
      tagEl.style.color = "#fff";
    });
  });
</script>


<!-- for clickability of publication wrapper-->
<script>

document.querySelectorAll('.publication-wrapper').forEach(el => {
  el.addEventListener('click', () => {
    const url = el.dataset.href;
    if (url) window.location.href = url;
  });
});

</script>

<script>
document.addEventListener("DOMContentLoaded", function () {
  const input = document.getElementById("search");
  const publications = document.querySelectorAll(".publication");

  input.addEventListener("input", function () {
    const query = input.value.trim().toLowerCase();

    publications.forEach(pub => {
      const wrapper = pub.querySelector(".publication-wrapper");
      const hr = pub.querySelector("hr");
      const title = wrapper.querySelector(".information h1")?.textContent.toLowerCase() || "";
      const tags = pub.dataset.tags?.toLowerCase().split(",") || [];

      const titleMatch = title.includes(query);
      const tagMatch = tags.some(tag => tag.includes(query));

      const shouldShow = query === "" || titleMatch || tagMatch;

      wrapper.style.display = shouldShow ? "flex" : "none";
      if (hr) hr.style.display = shouldShow ? "block" : "none";
    });
  });
});
</script>

